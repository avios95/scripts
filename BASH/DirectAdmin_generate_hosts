


#Генерация hosts на шареде Directadmin c выводом на termbin
for user in `ls -1 /usr/local/directadmin/data/users/ `;do
    echo "#========== $user ========== ";
    for domain in `cat /usr/local/directadmin/data/users/$user/domains.list` ; do
        echo `cat /usr/local/directadmin/data/users/$user/user_ip.list`" www.$domain $domain"
    done
done | nc termbin.com 9999


#Генерация IP--domain на шареде Directadmin

#user & ip
for user in `ls -1 /usr/local/directadmin/data/users/ `;do
    echo -e "$user \t\t\t `cat /usr/local/directadmin/data/users/$user/user_ip.list`";
done | nc termbin.com 9999

#users domain &ip
for user in `cat 1 | awk '{print $3}'`;do
    echo "#========== $user ========== ";
    for domain in `cat /usr/local/directadmin/data/users/$user/domains.list` ; do
        echo `cat /usr/local/directadmin/data/users/$user/user_ip.list`" www.$domain $domain"
    done
done





#---------------------------------------------------------------------#
#Генерим команды чтоб заменить пути и префиксы БД при переносе DirectAdmin пользователей
>cat list
useroldname      usernewname
useroldname1      usernewname1
useroldname2      usernewname2


while IFS= read -r i
do
   echo "sed -i \"s#`echo $i|awk '{print $1}'`_#`echo $i|awk '{print $2}'`_#g\" \`grep -rl \"`echo $i|awk '{print $1}'`_\" /home/`echo $i|awk '{print $2}'`/domains/*/p*_html/\`" 
done < list ; while IFS= read -r i
do
   echo "sed -i \"s#/home/`echo $i|awk '{print $1}'`/#/home/`echo $i|awk '{print $2}'`/#g\" \`grep -rl \"/home/`echo $i|awk '{print $1}'`/\" /home/`echo $i|awk '{print $2}'`/domains/*/p*_html/\`" 
done < list


#----------------------------------------------------------------------#
